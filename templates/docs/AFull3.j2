{% from 'macros.j2' import docs_sdotermlink as sdotermlink with context %}
<!DOCTYPE html>
<html lang="en">
<!-- Generated from Home.j2 -->
    {% include 'docs/DocsHead.j2' with context %}
<body>
    <style>
        details.dttDetails{
            display: inline-block;
        }
        details.dttDetails > summary{
            cursor:pointer;
            border: none;
            list-style: none;
            width: 1em;
            padding-left: 5px;
        }
        details.dttDetails > summary::-webkit-details-marker{
            display: none;
        }
        details.dttDetails > summary:before{
            content: "+";
        }
        details.dttDetails[open] > summary:before{
            content: "-";
        }


        .dttBranch {
            display: block;
        }

        .dttBranch .dttLabel {
            display: inline-block;
            vertical-align: top;
            cursor: pointer;
        }
        .dttBranch .dttLabel::before {
            content: "";
        }
        
        .dttBranch[dttState='treeopen'] > .dttLabel::before {
            content: url(dtt-down-arrow.png);
            position: relative;
        }
        .dttBranch[dttState='treeclosed'] > .dttLabel::before {
            content: url(dtt-right-arrow.png);
            position: relative;
        }
        .dttLeaf > a::before,
        .dttLeaf > span::before{
            content: url(dtt-bullet.png);
            position: relative;
            pading-right: 5px;
        }

        ul.dttTree {
            list-style-type: none;
        }
        ul.dttSubTree {
            display: block;
            padding: 0;
            list-style-type: none;
        }
        .ddtCloseAll,
        .ddtOpenAll{
          background-color: grey;
          color: white;
          cursor: pointer;
          padding: 4px;
        }
    </style>
    <script>
    window.addEventListener('load', function () {

        var branches = document.getElementsByClassName("dttBranch");
            for (var i = 0; i < branches.length; i++) {
                branches[i].addEventListener("click",dttBranchToggle);
            }    
        var focusTargets = [];
        focusTargets[0] = document.getElementsByClassName("dttLabel");
        focusTargets[1] = document.getElementsByClassName("dttLeaf");
        for(var t = 0; t < focusTargets.length;t++){
          var targ = focusTargets[t];
          for (var i = 0; i < targ.length; i++) {
              var children = targ[i].childNodes;
              for(j = 0; j < children.length;j++){
                var child = children[j];
                if(child.classList){
                  child.classList.add("dttFocusItem");
                  child.tabIndex = -1;
                  child.addEventListener("keydown",dttLabelKey);
                }
              }
          }
        }   

        var dets = document.getElementsByClassName("dttDetails");
            for (var i = 0; i < dets.length; i++) {
                var det = dets[i];
                det.addEventListener("toggle",dttToggleCheck,i);
            }

        var sums = document.getElementsByTagName("summary");
        for(var i = 0; i < sums.length; i++){
          var sum = sums[i];
          sum.addEventListener("click",dttBranchToggle);
                
          var details = sum.parentNode;
          if(details.classList.contains("dttDetails")){
            sum.addEventListener("keydown",dttSummaryKey);
            sum.classList.add("dttFocusItem");
            sum.tabIndex = -1;
          }
        }

        var bts = document.getElementsByClassName("ddtOpenAll");
        for (var i = 0; i < bts.length; i++) {
            bts[i].addEventListener("click",dttOpenClose);
        }    

        var bts = document.getElementsByClassName("ddtCloseAll");
        for (var i = 0; i < bts.length; i++) {
            bts[i].addEventListener("click",dttOpenClose);
        }    
    });

    function dttOpenClose(event){
      node = event.currentTarget;
      open = false;
      expanded = "false";
      classes = node.classList;
      if(classes.contains("ddtOpenAll")){
        open = true;
        expanded = "true";
      }
      if(classes.contains("ddtCloseAll")){
        open = false;
        expanded = "false";
      }

      target = node.getAttribute("treeid");
      if(target){
        tree = document.getElementById(target);
        dets = tree.querySelectorAll("details.dttDetails")
        for(var j=0;j < dets.length;j++){
            dets[j].open = open
            dets[j].setAttribute("aria.expanded",expanded);
        }
      }
    }

    function dttBranchToggle(event){
        node = event.currentTarget;
        var kids = node.childNodes;
        for(var i=0;i < kids.length;i++){
            kid = kids[i];
            classes = kid.classList;
            if(classes && classes.contains("dttDetails")){
                if (kid.open){
                    kid.open = false;
                    kid.setAttribute("aria.expanded","false");
                }else{
                    kid.open = true;
                    kid.setAttribute("aria.expanded","true")
                }
                break;
            }
        }
        event.stopPropagation();
    }

  var keyCode = Object.freeze({
      RETURN: 13,
      SPACE: 32,
      PAGEUP: 33,
      PAGEDOWN: 34,
      END: 35,
      HOME: 36,
      LEFT: 37,
      UP: 38,
      RIGHT: 39,
      DOWN: 40
  });

    function dttLabelKey(event){
      var key = event.keyCode;
      var node = event.currentTarget;
      var currentlimb = currentLimb(node);
      var branches = currentBranches(node);
      var pos = currenBranchPosition(node);
      var maxbranch = branches.length -1;
      var isLeaf = false;
      if (node.classList && node.classList.contains("dttLeaf")){
        isLeaf = true;
      }
      var target = null;
      switch (key) {
        case keyCode.RIGHT:
          if(!isLeaf){
            focusOnBranchSummary(currentlimb,node);
          }
          break;
        case keyCode.UP:
          if(pos > 0){
            target = branches[Math.max(0,pos - 1)];
          }else if(pos == 0){
            var parent = parentBranch(node);
            focusOnBranchSummary(parent,node);
          }
          break;
        case keyCode.DOWN:
          target = branches[Math.min(pos + 1, maxbranch)];
          break;
        case keyCode.END:
          target = branches[maxbranch];
          break;
        case keyCode.HOME:
          target = branches[0];
          break;
      }
      if(target){
        focusOnBranchLabel(target,node);
      }
    }

    function dttSummaryKey(event){
        var key = event.keyCode;
        var node = event.currentTarget;
        var currentlimb = currentLimb(node);
  
        var details = node.parentNode;
        if(details.classList.contains("dttDetails")){
            switch (key) {
                case keyCode.RETURN:
                case keyCode.RIGHT:
                case keyCode.DOWN:
                    if(!details.open){
                        details.open = true;
                    }else{
                      focusOnTree(limbSubTree(currentlimb),node);
                    }
                    break;
                case keyCode.UP:
                case keyCode.LEFT:
                    if(details.open){
                        details.open = false;
                      }else{
                        focusOnBranchLabel(currentlimb,node);
                      }
                    break;
            }
        }
    }
  

  function currentLimb(node){
    var limb = null;
    var parent = node;
    while(parent){
      var classList = parent.classList;
      if(classList && classList.contains("dttLabel")){
        limb = parent.parentNode;
        break;
      }else if(classList && (classList.contains("dttLeaf") || classList.contains("dttBranch"))){
        limb = parent;
        break;
      }
      parent = parent.parentNode;
    }
    return limb;
  }

  function parentBranch(node){
    var current = currentLimb(node);
    parenttree = currentTree(current.parentNode)
    var classList = parenttree.classList;
    if(classList && classList.contains("dttTree")){
      return current;
    }
    return currentLimb(current.parentNode);
  }
  
  function currentTree(node){
      var Tree = null;
      var parent = node;
      while(parent){
        var classList = parent.classList;
        if(classList && (classList.contains("dttSubTree")|| classList.contains("dttTree")) ){
          Tree = parent;
          break;
        }
        parent = parent.parentNode;
      }
      return Tree;
    }

    function limbSubTree(limb){
      var classList = limb.classList;
      if(classList && classList.contains("dttBranch")){
        var children = limb.childNodes;
        for(var i = 0; i < children.length; i++){
          var child = children[i];
          var cclassList = child.classList;
          if(cclassList && cclassList.contains("dttDetails")){
            var items = child.childNodes;
            for(var j=0;j<items.length;j++){
              var it = items[j];
              var iclassList = it.classList;
              if(iclassList && iclassList.contains("dttSubTree")){
                return items[j];
                break;
              }
            }
          }
        }
      }
    }

    function classInChildren(classname,node){
      var children = node.childNodes;
      for(var i =0;i <children.length;i++){
        var child = children[i];
        var classList = child.classList;
        if(classList && classList.contains(classname)){  
          return child;
        }
        ret = classInChildren(classname,child);
        if(ret){
          return ret;
        }
      }
      return null;
    }

    function parentTree(tree){
      ret = null;
      var classList = tree.classList;
      if(classList && classList.contains("dttSubTree")){
        ret = currentTree(tree.parentNode);
      }
      return ret;
    }

    function treeBranches(tree){
      var branches = [];
      for(var i = 0;i < tree.childNodes.length;i++){
        var ti = tree.childNodes[i]
        if(ti.classList &&  (ti.classList.contains("dttLeaf") || ti.classList.contains("dttBranch"))){
          branches.push(ti);
        } 
      }
      return branches ;
    }

    function currentBranches(node){
      var tree = currentTree(node);
      return treeBranches(tree);
    }

    function branchPosition(branches,branch){
      var pos = -1;
      for(var i =0;i< branches.length;i++){
        if(branches[i] === branch){
          pos = i;
          break;
        }
      }
      return pos;
    }

    function currenBranchPosition(node){
      var currentBranch = currentLimb(node);
      var branches = currentBranches(node);
      return branchPosition(branches,currentBranch);
    }

    function focusOnBranchSummary(branch,currentNode){
      if(currentNode === undefined){
        currentNode = null;
      }
      var target = null;
      var children = branch.childNodes;
      for(var i = 0; i < children.length; i++){
        var child = children[i];
        var classList = child.classList;
        if(classList && classList.contains("dttDetails")){
          var items = child.childNodes;
          for(var j=0;j<items.length;j++){
            var it = items[j];
            if(it.tagName == "SUMMARY"){
              target =  items[j];
              break;
            }
          }
        }
        if(target){
          break;
        }
      }
     if(target){
        moveFocus(target,currentNode);
      }
    }

    function focusOnBranchLabel(branch,currentNode){
      if(currentNode === undefined){
        currentNode = null;
      }
      var target = null;
      var children = branch.childNodes;
      var bclassList = branch.classList;
      if(bclassList &&  bclassList.contains("dttLeaf")){
        for(var i =0; i < children.length;i++){
          var child = children[i];
          var classList = child.classList;
          if(classList &&  classList.contains("dttFocusItem")){
            target = child;
            break;
          }
        }
      }else{
        for(var i = 0; i < children.length; i++){
          var child = children[i];
          var classList = child.classList;
          if(classList &&  classList.contains("dttLabel")){
            var items = child.childNodes;
            for(var j=0;j<items.length;j++){
              t = items[j];
              if(t.classList &&  t.classList.contains("dttFocusItem")){
                target =  t;
                break;
              }
            }
          }
          if(target){
            break;
          }
        }
      }
      if(target){
        moveFocus(target,currentNode);
      }
    }

    function focusOnTree(tree,currentNode){
      var branches = treeBranches(tree);
      var firstBranch = branches[0];
      focusOnBranchLabel(firstBranch,currentNode)
    }

    function moveFocus(node,currentNode){
      if(currentNode === undefined){
        currentNode = null;
      }  
      node.focus();
      node.tabIndex = 0;
      if(currentNode){
        currentNode.tabIndex = -1;
      }
    }
    


    function dttToggleCheck(event){
        node = event.currentTarget;
        var state = "treeclosed";
        if(node.open){
            state = "treeopen"
        }
        var parent = node.parentNode;
        var parentBranch = null;
        while (parent){
            if (parent.classList.contains("dttBranch")){
                parentBranch = parent;
                break;
            }
        }
        if(parentBranch){
            parentBranch.setAttribute("dttState",state)
        }
    }

    function dttOpenParents(id){
      var target = id.getAttribute('href');
      target = target.substring(1);
      targetNode = document.getElementById(target);
    
      var parent = targetNode.parentNode;
      while (parent){
        if (parent.classList && parent.classList.contains("dttTree")){
          break;
        }
        if (parent.classList && parent.classList.contains("dttDetails")){
          parent.open = true;
        }
        parent = parent.parentNode;
      }
    }

  
    </script>
    {% include 'PageHeader.j2' with context %}
  <div id="mainContent">

      <h3>Full Hierarchy</h3>

      <p>
      Schema.org is defined as two hierarchies: one for textual property values, and one for the things that they describe. 
      </p> 

      <p>This is the main schema.org hierarchy: a collection of types (or "classes"), each of which has one or more parent types. Although a type may have more than one super-type, here we show each type in one branch of the tree only. There is also a parallel hierarchy for <a href="#datatype_tree">data types</a>.</p>

      <br/>
     <div style="display: block;text-align:left;">
     This is a development version of this page plese try it out, or <a href="/docs/full.html">return to the original version</a>.
     </div>

    {% for node in listings recursive %}
      {% if loop.depth == 1 %}
        <div>
            {% if node.title %}<h4 id="Listing{{loop.index}}">{{node.title}}</h4>{% endif %}
        <ul class="dttTree" role="tree" id="tree{{loop.index}}">
        <div class="OpenClose">
          <span class="ddtCloseAll" role="button" treeid="tree{{loop.index}}"> Close hierarchy </span> / 
          <span class="ddtOpenAll" role="button" treeid="tree{{loop.index}}"> Open hierarchy </span>
          <br/>
        </div>

      {% endif %}
      {% if not node.retired %}
        {% if node.subs %}
          <li role="treeitem"
            aria-level="{{loop.depth}}"
            aria-setsize="{{loop.length}}"
            aria-posinset="{{loop.index}}"
            class="dttBranch" 
            dttState="treeclosed" 
            id="C.{{node.id}}">
            <div role="none" class="dttLabel">
              {{ sdotermlink(node)|safe }}
            </div>
            <details class="dttDetails" {% if loop.depth == 1 %} open aria-expanded="true" {% else %}aria-expanded="false" {% endif %}>
              <summary aria-label="Expand/collapse {{node.id}}"></summary>
              <ul class="dttSubTree" role="group">
                {{ loop(node.subs) }}
              </ul>
            </details>
          </li>
        {% else %}
          <li role="none"
          tabIndex="-1"
            aria-level="{{loop.depth}}"
            aria-setsize="{{loop.length}}"
            aria-posinset="{{loop.index}}"
            class="dttLeaf">
            {% if node.termType == "Enumerationvalue" %}::{% endif %}
            {{ sdotermlink(node)|safe }}
            <!--
            {% if node.repeat %} 
                <span 
                title="{{node.id}} referenced elsewhere in hierarchy - check details">></span> 
              {% endif %}
            -->
          </li>
        {% endif %}

     {% endif %}
     {% if loop.depth == 1 %}
        </ul>
      {% endif %}
    {% endfor %}
            
              
      
</div><!-- mainContent -->


{% include 'PageFooter.j2' with context %}

</body>
</html>
      
      
